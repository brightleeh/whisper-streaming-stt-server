server:
  port: 50051 # gRPC listen port
  max_sessions: 4 # Concurrent gRPC sessions
  metrics_port: 8000 # HTTP metrics/health port
  decode_timeout_sec: 30 # Seconds to wait for decode tasks when draining
  log_metrics: false # Emit decode metrics logs
  session_timeout_sec: 60 # Seconds of inactivity before aborting a session
  max_buffer_sec: 60 # Max buffered audio seconds before partial decode/trim (null disables)
  max_buffer_bytes: null # Max buffered audio bytes before partial decode/trim (null disables)
  sample_rate: 16000 # Fallback sample rate when chunks omit it

vad:
  silence: 0.5 # Seconds of trailing silence to trigger decode
  threshold: 0.5 # Silero VAD speech probability threshold (0-1)

safety:
  speech_rms_threshold: 0.00 # Minimum RMS required before decoding buffered audio

logging:
  level: "INFO" # TRACE/DEBUG/INFO/WARN/ERROR
  file: null # Optional log file path
  faster_whisper_level: null # Optional: override faster_whisper logger level

storage:
  persist_audio: false # Enable server-side audio capture
  directory: "data/audio" # Directory to store captured audio
  max_bytes: null # Optional cap on total bytes in directory
  max_files: null # Optional maximum number of stored files
  max_age_days: null # Optional retention window in days

health:
  window_sec: 60 # Rolling window for decode health aggregation
  min_events: 5 # Minimum events before evaluating health ratios
  max_timeout_ratio: 0.5 # Degraded when decode timeouts exceed this ratio
  min_success_ratio: 0.5 # Degraded when successful decodes fall below this ratio
