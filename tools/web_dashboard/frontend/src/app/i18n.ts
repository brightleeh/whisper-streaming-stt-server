export type Locale = "en" | "ko" | "ja";

type Messages = Record<string, string>;

export const MESSAGES: Record<Locale, Messages> = {
  en: {
    status_idle: "Idle",
    status_running: "Running",
    title: "Whisper Ops Web Dashboard",
    subtitle:
      "Launch multi-channel gRPC load tests, stream KPI snapshots over SSE, and inspect performance hot spots without digging through CLI logs.",
    run_control: "Run Control",
    input_source: "Input Source",
    input_file: "File Upload",
    input_mic: "Mic Recording",
    target: "Target",
    help_target:
      "Targets are loaded from tools/web_dashboard/targets.json. Update grpc_target (host:port) and http_base (/system, /metrics.json).",
    wav_upload: "WAV Upload",
    choose_wav: "Choose WAV",
    no_file_selected: "No file selected",
    no_recording_yet: "No recording yet",
    file_ready: "File ready",
    no_file: "No file",
    no_target: "No target",
    channels: "Channels",
    duration_sec: "Duration (sec)",
    ramp_steps: "Ramp-up steps",
    ramp_interval: "Ramp-up interval",
    chunk_ms: "Chunk (ms)",
    speed: "Speed",
    decode_profile: "Decode Profile",
    vad_mode: "VAD Mode",
    language_optional: "Language (optional)",
    auth_token_optional: "Auth Token (optional)",
    attributes: "Attributes (key=value)",
    metadata: "Metadata (key=value)",
    realtime_pacing: "Realtime pacing",
    start_run: "Start Run",
    stop_run: "Stop Run",
    resource_status: "Resource Status",
    server_config: "Server Config",
    server_config_unavailable: "Server config unavailable",
    server_config_stale: "Last seen",
    status_down: "down",
    live_kpis: "Live KPIs",
    verdict_ok: "Healthy",
    verdict_warn: "At Risk",
    verdict_bad: "Overloaded",
    verdict_idle: "Idle",
    verdict_throughput: "Throughput Mode",
    verdict_waiting: "Waiting for data",
    verdict_throughput_detail: "Throughput mode: compare RTF/throughput across runs",
    latency_p95: "Latency p95",
    latency_p99: "Latency p99",
    rtf_p95: "RTF p95",
    throughput: "Throughput",
    errors: "Errors",
    latency_throughput: "Latency & Throughput",
    gpu_utilization: "GPU Utilization",
    run_logs: "Run Logs",
    logs_empty: "Logs will appear here once streaming starts.",
    sessions_preview: "Session Results (CSV)",
    sessions_preview_empty: "Session results will appear here after a run.",
    run_history_compare: "Run History & Compare",
    compare_a: "Compare A",
    compare_b: "Compare B",
    select_run: "Select run",
    download_report: "Download report",
    download_sessions: "Download sessions CSV",
    ready_to_start: "Ready to start",
    alert_upload_first: "Upload a WAV file first.",
    alert_select_target: "Select a target.",
    alert_upload_failed: "Upload failed",
    alert_start_run_failed: "Failed to start run",
    sse_dropped: "SSE connection dropped",
    record_requesting: "Requesting microphone...",
    record_recording: "Recording...",
    record_processing: "Processing audio...",
    record_upload_complete: "Upload complete",
    record_failed: "Failed to process recording",
    record_permission_denied: "Microphone permission denied",
    record: "Record",
    stop: "Stop",
    finish: "Finish",
    auto: "Auto",
    help_ramp_steps:
      "Sets how many steps are used to reach the target channel count. (e.g., 100 channels, 5 steps → +20 channels per step)",
    help_ramp_interval:
      "Wait time (seconds) between ramp steps. Load is held at each step to observe stability.",
    help_realtime_pacing:
      "ON: send audio in real time (1x) for latency testing.\nOFF: send as fast as possible for throughput testing.",
    help_chunk_ms:
      "Audio duration per gRPC request. Typical range is 20–100ms.",
    help_vad_mode:
      "Voice Activity Detection. 'Auto' skips silence to reduce bandwidth.",
    help_attrs_metadata:
      "Attributes: included in the gRPC InitRequest (session settings).\nMetadata: included in gRPC headers (auth/routing).",
  },
  ko: {
    status_idle: "대기",
    status_running: "실행 중",
    title: "Whisper Ops Web Dashboard",
    subtitle:
      "다채널 gRPC 부하 테스트를 실행하고 SSE로 KPI 스냅샷을 스트리밍해 CLI 로그 없이 성능 병목을 확인합니다.",
    run_control: "실행 제어",
    input_source: "입력 소스",
    input_file: "파일 업로드",
    input_mic: "마이크 녹음",
    target: "타겟",
    help_target:
      "타겟 목록은 tools/web_dashboard/targets.json에서 로드됩니다. grpc_target(host:port) 및 http_base(/system, /metrics.json)를 설정하세요.",
    wav_upload: "WAV 업로드",
    choose_wav: "파일 선택",
    no_file_selected: "선택된 파일 없음",
    no_recording_yet: "녹음 없음",
    file_ready: "준비됨",
    no_file: "파일 없음",
    no_target: "타겟 미지정",
    channels: "채널 수",
    duration_sec: "테스트 시간(초)",
    ramp_steps: "Ramp-up 단계",
    ramp_interval: "Ramp-up 간격",
    chunk_ms: "청크 크기(ms)",
    speed: "재생 속도",
    decode_profile: "디코딩 프로필",
    vad_mode: "VAD 모드",
    language_optional: "언어(선택)",
    auth_token_optional: "인증 토큰 (선택)",
    attributes: "속성 (key=value)",
    metadata: "메타데이터 (key=value)",
    realtime_pacing: "실시간 페이싱",
    start_run: "테스트 시작",
    stop_run: "테스트 중지",
    resource_status: "리소스 상태",
    server_config: "서버 설정",
    server_config_unavailable: "서버 설정 정보 없음",
    server_config_stale: "마지막 확인",
    status_down: "연결 끊김",
    live_kpis: "실시간 KPI",
    verdict_ok: "정상",
    verdict_warn: "주의",
    verdict_bad: "과부하",
    verdict_idle: "대기",
    verdict_throughput: "Throughput 모드",
    verdict_waiting: "데이터 대기 중",
    verdict_throughput_detail: "Throughput 모드: RTF/처리량을 실행별로 비교",
    latency_p95: "지연 시간 P95",
    latency_p99: "지연 시간 P99",
    rtf_p95: "RTF P95",
    throughput: "처리량 (Throughput)",
    errors: "에러",
    latency_throughput: "지연 시간 및 처리량",
    gpu_utilization: "GPU 사용률",
    run_logs: "실행 로그",
    logs_empty: "스트리밍이 시작되면 로그가 표시됩니다.",
    sessions_preview: "세션 결과 (CSV)",
    sessions_preview_empty: "실행이 끝나면 세션 결과가 표시됩니다.",
    run_history_compare: "이력 및 비교",
    compare_a: "비교 대상 A",
    compare_b: "비교 대상 B",
    select_run: "실행 ID 선택",
    download_report: "리포트 다운로드",
    download_sessions: "세션 CSV 다운로드",
    ready_to_start: "시작 대기",
    alert_upload_first: "먼저 WAV 파일을 업로드하세요.",
    alert_select_target: "타겟을 선택하세요.",
    alert_upload_failed: "업로드 실패",
    alert_start_run_failed: "시작 실패",
    sse_dropped: "SSE 연결이 끊어졌습니다",
    record_requesting: "마이크 권한 요청 중...",
    record_recording: "녹음 중...",
    record_processing: "오디오 처리 중...",
    record_upload_complete: "업로드 완료",
    record_failed: "녹음 처리 실패",
    record_permission_denied: "마이크 권한이 거부되었습니다",
    record: "녹음",
    stop: "중지",
    finish: "완료",
    auto: "자동",
    help_ramp_steps:
      "최대 채널 수(Target)에 도달하기까지 거칠 단계 수입니다. (예: 100채널, 5단계 → 20채널씩 5번 증가)",
    help_ramp_interval:
      "각 부하 증가 단계 사이의 대기 시간(초)입니다. 이 시간 동안 부하를 유지하며 안정성을 확인합니다.",
    help_realtime_pacing:
      "ON: 실제 오디오 속도(1x)로 전송 (지연 시간 테스트용)\nOFF: 가능한 최대 속도로 전송 (처리량 한계 테스트용)",
    help_chunk_ms:
      "한 번의 gRPC 요청으로 전송할 오디오 길이입니다. 보통 20~100ms를 권장합니다.",
    help_vad_mode:
      "음성 활동 감지(VAD) 방식입니다. Auto는 무음 구간을 보내지 않아 대역폭을 절약합니다.",
    help_attrs_metadata:
      "Attributes: gRPC InitRequest 메시지 필드(세션 설정)\nMetadata: gRPC Header(인증/라우팅)",
  },
  ja: {
    status_idle: "待機中",
    status_running: "実行中",
    title: "Whisper Ops Web Dashboard",
    subtitle:
      "マルチチャネルのgRPC負荷テストを実行し、SSEでKPIスナップショットを配信してCLIログなしでボトルネックを確認します。",
    run_control: "コントロールパネル",
    input_source: "入力ソース",
    input_file: "ファイル",
    input_mic: "マイク",
    target: "ターゲット",
    help_target:
      "ターゲットは tools/web_dashboard/targets.json からロードされます。grpc_target(host:port) および http_base(/system, /metrics.json) を設定してください。",
    wav_upload: "WAVアップロード",
    choose_wav: "ファイル選択",
    no_file_selected: "ファイル未選択",
    no_recording_yet: "録音なし",
    file_ready: "準備完了",
    no_file: "ファイルなし",
    no_target: "ターゲットなし",
    channels: "チャネル数",
    duration_sec: "実行時間(秒)",
    ramp_steps: "Ramp-upステップ",
    ramp_interval: "Ramp-up間隔",
    chunk_ms: "チャンクサイズ(ms)",
    speed: "再生速度",
    decode_profile: "デコード設定",
    vad_mode: "VADモード",
    language_optional: "言語(任意)",
    auth_token_optional: "認証トークン (任意)",
    attributes: "属性 (key=value)",
    metadata: "メタデータ (key=value)",
    realtime_pacing: "リアルタイム・ペーシング",
    start_run: "テスト開始",
    stop_run: "テスト停止",
    resource_status: "リソース状態",
    server_config: "サーバー設定",
    server_config_unavailable: "サーバー設定なし",
    server_config_stale: "最終確認",
    status_down: "切断",
    live_kpis: "リアルタイムKPI",
    verdict_ok: "正常",
    verdict_warn: "注意",
    verdict_bad: "過負荷",
    verdict_idle: "待機",
    verdict_throughput: "Throughput モード",
    verdict_waiting: "データ待ち",
    verdict_throughput_detail: "Throughput モード: 実行ごとにRTF/スループットを比較",
    latency_p95: "レイテンシ P95",
    latency_p99: "レイテンシ P99",
    rtf_p95: "RTF P95",
    throughput: "スループット",
    errors: "エラー",
    latency_throughput: "レイテンシ & スループット",
    gpu_utilization: "GPU使用率",
    run_logs: "実行ログ",
    logs_empty: "ストリーミング開始後にログが表示されます。",
    sessions_preview: "セッション結果 (CSV)",
    sessions_preview_empty: "実行完了後にセッション結果が表示されます。",
    run_history_compare: "履歴と比較",
    compare_a: "比較対象 A",
    compare_b: "比較対象 B",
    select_run: "実行IDを選択",
    download_report: "レポートをダウンロード",
    download_sessions: "セッションCSVをダウンロード",
    ready_to_start: "開始待機",
    alert_upload_first: "まずWAVファイルをアップロードしてください。",
    alert_select_target: "ターゲットを選択してください。",
    alert_upload_failed: "アップロード失敗",
    alert_start_run_failed: "開始失敗",
    sse_dropped: "SSE接続が切断されました",
    record_requesting: "マイク権限を要求中...",
    record_recording: "録音中...",
    record_processing: "音声処理中...",
    record_upload_complete: "アップロード完了",
    record_failed: "録音処理に失敗しました",
    record_permission_denied: "マイク権限が拒否されました",
    record: "録音",
    stop: "停止",
    finish: "完了",
    auto: "自動",
    help_ramp_steps:
      "ターゲットチャネル数に到達するまでのステップ数です。(例: 100ch、5ステップ → 1ステップごとに20ch増加)",
    help_ramp_interval:
      "各ステップ間の待機時間(秒)です。この間、負荷を維持して安定性を確認します。",
    help_realtime_pacing:
      "ON: 実時間(1x)で音声を送信 (レイテンシ測定用)。\nOFF: 最大速度で送信 (スループット限界測定用)。",
    help_chunk_ms:
      "1回のgRPCリクエストで送信する音声データの長さです。通常20〜100msが推奨されます。",
    help_vad_mode:
      "音声区間検出(VAD)モードです。「Auto」は無音区間を送信しないため、帯域幅を節約します。",
    help_attrs_metadata:
      "Attributes: gRPC InitRequestのフィールド (セッション設定)\nMetadata: gRPCヘッダー (認証/ルーティング)",
  },
};

export function detectLocale(lang?: string): Locale {
  const value = (lang || "").toLowerCase();
  if (value.startsWith("ko")) {
    return "ko";
  }
  if (value.startsWith("ja")) {
    return "ja";
  }
  return "en";
}
